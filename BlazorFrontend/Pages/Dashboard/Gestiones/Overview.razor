@page "/inicio/overview/{id?}"
@using global::Services.Gestion
@using Microsoft.AspNetCore.WebUtilities
@using BlazorFrontend.Pages.Gestiones
@using BlazorFrontend.Pages.Gestiones.Editar
@using BlazorFrontend.Pages.Gestiones.Eliminar
@using Modelos.Models.Enums
@using DialogOptions = MudBlazor.DialogOptions
@using Size = MudBlazor.Size
@inject GestionServices GestionServices
@inject NavigationManager NavigationManager
@layout DashboardLayout
@inject IDialogService DialogService

<h3>Lista de gestiones activas</h3>
<MudDataGrid T="GestionDto"
             Items="@_gestiones.Take(2)"
             Hover="@true"
             Readonly="@false"
             EditMode="DataGridEditMode.Form"
             Bordered="@true"
             EditTrigger="DataGridEditTrigger.Manual">
    <Columns>
        <PropertyColumn Property="@(i => i.Nombre)"/>
        <PropertyColumn Property="@(i => i.FechaInicio)" Title="Fecha de inicio"/>
        <PropertyColumn Property="@(i => i.FechaFin)" Title="Fecha de cierre"/>
        <PropertyColumn Property="@(i => i.Estado)"/>
        <TemplateColumn CellClass="d-flex justify-center">
            <CellTemplate>
                <MudIconButton Class="pa-1"
                        Color="Color.Warning"
                        Size="Size.Small"
                        Icon="@Icons.Material.Outlined.Edit"
                        OnClick="() => EditarGestion(context.Item)"/>
                <MudIconButton Class="pa-1"
                               Color="Color.Error"
                               Size="Size.Small"
                               Icon="@Icons.Material.Outlined.Delete"
                               OnClick="() => BorrarGestion(context.Item)"/>
                <MudIconButton Class="pa-1"
                               Color="Color.Info"
                               Size="Size.Small"
                               Icon="@Icons.Material.Outlined.Timelapse"
                               OnClick="() => NavigateToPage(context.Item) "/>
            </CellTemplate>
        </TemplateColumn>
    </Columns>
</MudDataGrid>


<MudFab Class="ma-4" Color="Color.Success" StartIcon="@Icons.Material.Filled.Add"
        @onclick="@ShowMudCrearGestionModal" Label="Agregar Gestion"/>

