@page "/inicio"
@using BlazorFrontend.Services
@using Variant = MudBlazor.Variant
@inject IDialogService DialogService
@inject EmpresaService EmpresaService
@inject NavigationManager NavigationManager
@inject Blazored.LocalStorage.ILocalStorageService LocalStorage
@layout LoginLayout

<MudAppBar Elevation="5">
    <MudSpacer/>
    <MudMenu Icon="@Icons.Material.Filled.AccountCircle"
             Color="Color.Inherit"
             Size="Size.Large"
             Edge="Edge.End"
             AnchorOrigin="Origin.BottomLeft"
             TransformOrigin="Origin.TopRight">
        <MudText Typo="Typo.subtitle2" Align="Align.Center"
                 GutterBottom="true">
            @Username
        </MudText>
        <MudMenuItem IconSize="Size.Small"
                     IconColor="Color.Dark"
                     Icon="@Icons.Material.Filled.Logout"
                     OnClick="CerrarSesion">
            Cerrar Sesion
        </MudMenuItem>
    </MudMenu>
</MudAppBar>


<MudGrid Justify="Justify.SpaceBetween">
    <MudGridItem>
        <MudAutocomplete T="string"
                         Label="Lista de empresas"
                         @bind-Value="SelectedEmpresaName"
                         SearchFunc="Search"
                         HelperText="Busque una empresa"
                         AdornmentIcon="@Icons.Material.Filled.Search"
                         Variant="Variant.Filled"
                         Dense="false"
                         Class="rounded-pill mb-4" />
    </MudGridItem>
    <MudGridItem>
        <MudGrid Container="true" Justify="Justify.SpaceEvenly">
            <MudButton Color="Color.Success"
                       StartIcon="@Icons.Material.Filled.Add"
                       @onclick="@ShowMudCrearEmpresaModal"
                       Class="rounded-pill"
                       Variant="Variant.Filled"
                       Size="Size.Large">
                Agregar
            </MudButton>
            <MudButton Color="Color.Warning"
                       Variant="Variant.Filled"
                       OnClick="Editar"
                       Size="Size.Large"
                       StartIcon="@Icons.Material.Filled.Edit"
                       Class="rounded-pill">
                Editar
            </MudButton>
            <MudButton Color="Color.Error"
                       StartIcon="@Icons.Material.Filled.Delete"
                       OnClick="Eliminar"
                       Size="Size.Large"
                       Variant="Variant.Filled"
                       Class="rounded-pill">
                Eliminar
            </MudButton>
            <MudButton Color="Color.Primary"
                       StartIcon="@Icons.Material.Filled.InsertChart"
                       Class="rounded-pill"
                       Size="Size.Large"
                       Disabled="true"
                       Variant="Variant.Filled">
                Reporte
            </MudButton>
            <MudButton Color="Color.Info"
                       StartIcon="@Icons.Material.Filled.Login"
                       Class="rounded-pill"
                       OnClick="NavigateToPage"
                       Size="Size.Large"
                       Variant="Variant.Filled">
                Ingresar
            </MudButton>
        </MudGrid>
    </MudGridItem>
</MudGrid>
@if (IsLoading)
{
    <MudOverlay Visible="IsLoading" DarkBackground="true" Absolute="true" ZIndex="9999">
        <MudProgressCircular Color="Color.Primary" Indeterminate="true" Size="Size.Large"/>
    </MudOverlay>
}