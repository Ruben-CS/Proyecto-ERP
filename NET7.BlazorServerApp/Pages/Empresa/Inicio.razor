@page "/inicio"
@using Modelos.Models
@using NET7.BlazorServerApp.Pages.Empresa.Components
@inject IDialogService DialogService

@if (IsSucces)
{
    <Toasts class="p-3" Messages="_messages" Placement="ToastsPlacement.TopRight" AutoHide="true" Delay="4000"/>
}


<MudContainer MaxWidth="MaxWidth.Small">
    <MudPaper Class="d-flex pa-4 ma-5" Elevation="0">
        I'm a flexbox container.
    </MudPaper>
    <MudPaper Class="d-flex pa-4" Elevation="0">
        <MudFab Color="Color.Success" StartIcon="@Icons.Material.Filled.Add"
                @onclick="@ShowMudCrearEmpresaModal" Label="Agregar Empresa"/>
    </MudPaper>
</MudContainer>

<MudGrid Class="ma-2 pa-4">
    <MudItem xs="12">
        <MudSelect T="string" Label="Empresa" Variant="Variant.Filled" AnchorOrigin="Origin.BottomCenter">
            <MudSelectItem Value="string.Empty"/>
            <MudSelectItem Value="string.Empty"/>
            <MudSelectItem Value="string.Empty"/>
            <MudSelectItem Value="string.Empty"/>
        </MudSelect>
    </MudItem>
    <MudItem xs="4">
        <MudFab Color="Color.Warning" StartIcon="@Icons.Material.Filled.Edit"
                Class="d-flex align-center
        justify-center
        mud-width-full py-8"
                Label="Editar Empresa"/>
    </MudItem>
    <MudItem xs="4">
        <MudFab Color="Color.Error" StartIcon="@Icons.Material.Filled.Delete"
                Class="d-flex align-center
                justify-center
                mud-width-full py-8"
                Label="Eliminar Empresa"/>
    </MudItem>
    <MudItem xs="4">
        <MudFab Color="Color.Info" StartIcon="@Icons.Material.Filled.Login"
                Class="d-flex align-center
                justify-center
                mud-width-full py-8"
                Label="Ingresar"/>
    </MudItem>
</MudGrid>

@code {
    [Inject]
    protected ToastService ToastService { get; set; }


    readonly List<ToastMessage> _messages = new();
    private bool IsSucces { get; set; }

    private void ShowMessage(ToastType toastType) => _messages.Add(CreateToastMessage(toastType));

    private ToastMessage CreateToastMessage(ToastType toastType)
        => new()
        {
            Type = toastType,
            Message = $"Empresa creade exitosamente el: {DateTime.Now}",
        };

    private void ShowMudCrearEmpresaModal()
    {
        //opens the _MudCrearEmpresaModal
        var options = new DialogOptions { CloseOnEscapeKey = true, MaxWidth = MaxWidth
        .Small, FullWidth = true};
        DialogService.Show<_MudCrearEmpresaModal>("Llene los datos de la empresa", options);
    }
}